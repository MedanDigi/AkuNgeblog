(function(b){Array.prototype.forEach2=function(d){var c=this.length;for(var e=0;e<c;e++){d(this[e],e)}};function a(d,g){var f=document.createElement("CANVAS"),c=f.getContext("2d"),e=new Image;f.height=g;f.width=d;c.drawImage(e,0,0);setTimeout(function(){f=null},10);return f.toDataURL("image/png")}jQuery(document).on("ready",function(){jQuery("[data-ot-css]","body").toArray().forEach2(function(k){var l=jQuery(k);l.attr("style",l.data("ot-css"))});var e=window.devicePixelRatio>1;if(e){jQuery(".retina-check","body").toArray().forEach2(function(k){jQuery(k).addClass("go-retina")});var j=0;jQuery("img[data-ot-retina]","body").toArray().forEach2(function(l){var m=jQuery(l);var k=new Image();if(m.data("ot-retina")==""){return false}k.src=m.attr("src");jQuery(k).load(function(){var n=jQuery(this);m.attr("src",a(n[0].width,n[0].height));m.css({"background-image":"url('"+m.data("ot-retina")+"')","background-size":"100% 100%","background-repeat":"none"})})})}jQuery("body").delegate(".lightbox, .light-close","click",function(l){if(l.toElement&&jQuery(l.toElement).hasClass("lightbox")||l.toElement&&jQuery(l.toElement).hasClass("light-close")||l.toElement&&jQuery(l.toElement).hasClass("fa-times")){var k=(jQuery(l.toElement).hasClass("light-close")||jQuery(l.toElement).hasClass("fa-times"))?jQuery(this).parents(".lightbox"):jQuery(this);k.css("overflow","hidden");jQuery("body").css("overflow","auto");k.find(".lightcontent").fadeOut("fast");k.fadeOut("slow");return false}});var i=0;jQuery(".item-overlay-blur").toArray().forEach2(function(m){var l=jQuery(m),o=l.find(".item-header img"),k=l.find(".item-overlay canvas"),p=l.data("blur-strength")||30,n="ot-bluritem-"+i+"-";if(k.size()<=0||o.size()<=0){return false}i++;o.attr("id",n+"img");k.attr("id",n+"canvas");stackBlurImage(n+"img",n+"canvas",p)});jQuery("body").delegate(".photo-gallery-thumbs button","click",function(){var m=jQuery(this),k=m.siblings(".photo-gallery-thumbs-inner").children(".item").eq(0),n=m.siblings(".photo-gallery-thumbs-inner").data("thumbs-start-from");if(m.hasClass("photo-gallery-nav-left")){if(n+216>=0){n=0;m.siblings(".photo-gallery-thumbs-inner").removeClass("not-first").removeClass("is-last")}else{n=n+216;m.siblings(".photo-gallery-thumbs-inner").removeClass("is-last")}}else{if(m.hasClass("photo-gallery-nav-right")){var l=(m.siblings(".photo-gallery-thumbs-inner").children(".item").size()*(78+8))-parseInt(jQuery(".photo-gallery-thumbs-inner",".photo-gallery-thumbs").width(),10);if(n-216<=(-1)*l){if(l>0){n=(-1)*l;m.siblings(".photo-gallery-thumbs-inner").addClass("is-last")}}else{n=n-216;m.siblings(".photo-gallery-thumbs-inner").addClass("not-first").removeClass("is-last")}}}k.css("margin-left",n+"px");m.siblings(".photo-gallery-thumbs-inner").data("thumbs-start-from",n);return false});jQuery(".search-header-bull","#header").on("click",function(){jQuery("body").addClass("big-search-active");setTimeout(function(){jQuery("#search-overlay form input").eq(0).focus()},200);return false});jQuery("body").delegate("#search-overlay","click",function(k){if(jQuery("body").hasClass("big-search-active")&&k.toElement&&jQuery(k.toElement).is("#search-overlay")){jQuery("body").removeClass("big-search-active")}});jQuery(document).on("keyup",function(k){if(k.keyCode==27&&jQuery("body").hasClass("big-search-active")){jQuery("body").removeClass("big-search-active")}});jQuery(".full-width-map","#content").on("mousedown",function(){jQuery(this).addClass("mousedown")}).on("mouseleave",function(){jQuery(this).removeClass("mousedown")});if(jQuery("#hypermenu-canvas").size()>0){var f=document.getElementById("hypermenu-canvas");var h=f.getContext("2d");var d=document.body,g=document.documentElement;var c=Math.max(d.scrollHeight,d.offsetHeight,g.clientHeight,g.scrollHeight,g.offsetHeight);html2canvas(document.documentElement,{onrendered:function(k){h.drawImage(k,0,0,f.width,c);stackBlurCanvasRGB("hypermenu-canvas",0,0,f.width,f.height,100);k=null;jQuery(f).fadeIn()},width:f.width,height:f.height})}})})(jQuery);var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function stackBlurImage(d,e,a,f){var c=document.getElementById(d);c.onload=function(){b()};if(c.complete||c.complete===undefined){b()}function b(){var g=c.naturalWidth;var k=c.naturalHeight;var i=document.getElementById(e);i.style.width=g+"px";i.style.height=k+"px";i.width=g;i.height=k;var j=i.getContext("2d");j.clearRect(0,0,g,k);j.drawImage(c,0,0);if(isNaN(a)||a<1){return}stackBlurCanvasRGB(e,0,0,g,k,a)}}function stackBlurCanvasRGB(J,D,B,a,b,N){if(isNaN(N)||N<1){return}N|=0;var h=document.getElementById(J);var W=h.getContext("2d");var R;try{R=W.getImageData(D,B,a,b)}catch(V){return false}var g=R.data;var L,K,T,Q,q,t,m,d,f,A,n,C,w,G,M,r,l,s,u,F;var U=N+N+1;var H=a<<2;var o=a-1;var P=b-1;var k=N+1;var O=k*(k+1)/2;var E=new BlurStack();var z=E;for(T=1;T<U;T++){z=z.next=new BlurStack();if(T==k){var j=z}}z.next=E;var S=null;var I=null;m=t=0;var v=mul_table[N];var c=shg_table[N];for(K=0;K<b;K++){G=M=r=d=f=A=0;n=k*(l=g[t]);C=k*(s=g[t+1]);w=k*(u=g[t+2]);d+=O*l;f+=O*s;A+=O*u;z=E;for(T=0;T<k;T++){z.r=l;z.g=s;z.b=u;z=z.next}for(T=1;T<k;T++){Q=t+((o<T?o:T)<<2);d+=(z.r=(l=g[Q]))*(F=k-T);f+=(z.g=(s=g[Q+1]))*F;A+=(z.b=(u=g[Q+2]))*F;G+=l;M+=s;r+=u;z=z.next}S=E;I=j;for(L=0;L<a;L++){g[t]=(d*v)>>c;g[t+1]=(f*v)>>c;g[t+2]=(A*v)>>c;d-=n;f-=C;A-=w;n-=S.r;C-=S.g;w-=S.b;Q=(m+((Q=L+N+1)<o?Q:o))<<2;G+=(S.r=g[Q]);M+=(S.g=g[Q+1]);r+=(S.b=g[Q+2]);d+=G;f+=M;A+=r;S=S.next;n+=(l=I.r);C+=(s=I.g);w+=(u=I.b);G-=l;M-=s;r-=u;I=I.next;t+=4}m+=a}for(L=0;L<a;L++){M=r=G=f=A=d=0;t=L<<2;n=k*(l=g[t]);C=k*(s=g[t+1]);w=k*(u=g[t+2]);d+=O*l;f+=O*s;A+=O*u;z=E;for(T=0;T<k;T++){z.r=l;z.g=s;z.b=u;z=z.next}q=a;for(T=1;T<=N;T++){t=(q+L)<<2;d+=(z.r=(l=g[t]))*(F=k-T);f+=(z.g=(s=g[t+1]))*F;A+=(z.b=(u=g[t+2]))*F;G+=l;M+=s;r+=u;z=z.next;if(T<P){q+=a}}t=L;S=E;I=j;for(K=0;K<b;K++){Q=t<<2;g[Q]=(d*v)>>c;g[Q+1]=(f*v)>>c;g[Q+2]=(A*v)>>c;d-=n;f-=C;A-=w;n-=S.r;C-=S.g;w-=S.b;Q=(L+(((Q=K+k)<P?Q:P)*a))<<2;d+=(G+=(S.r=g[Q]));f+=(M+=(S.g=g[Q+1]));A+=(r+=(S.b=g[Q+2]));S=S.next;n+=(l=I.r);C+=(s=I.g);w+=(u=I.b);G-=l;M-=s;r-=u;I=I.next;t+=a}}W.putImageData(R,D,B)}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null};